#!/usr/bin/env bash
# Sets right perspective when monitor is plugged in
export DISPLAY=:0

function connectLG(){
  xrandr \
    --output eDP1 --off \
    --output DP2 \
    --primary \
    --dpi 110 \
    --panning 3840x2160 \
    --mode 3840x2160 \
    --pos 0x0 \
    --rotate normal
  
  # Restart compton
  killall compton

  xcape
  ~/bin/setup-keyboard
}

function disconnect(){
  xrandr \
    --output VIRTUAL1 --off \
    --output DP1 --off \
    --output DP2 --off \
    --output DP1 --off \
    --output HDMI1 --off \
    --output HDMI2 --off \
    --output eDP1 \
    --primary \
    --dpi 92 \
    --auto
}

if [[ $(xrandr | grep "^DP2 connected") ]]; then
  connectLG
else
  disconnect
fi

~/.config/bspwm/bspwmrc

feh --no-fehbg --bg-scale /etc/dotfiles/themes/glimpse/wallpaper.png
